{% include 'header.twig' %}
<h1>Time Spent</h1>
<table>
    <thead>
        <tr>
            <th>Day</th>
            <th>Task</th>
            <th>Duration</th>
            <th>User</th>
            <th>Project</th>
        </tr>
    </thead>
    <tbody>
        {% for ts in times %}
            <tr>
                <th>{{ ts.day }}</th>
                <th>{{ ts.status }}</th>
                <td>{{ ts.duration | date('H:i') }}</td>
                <td>{{ ts.user }}</td>
                <td>{{ ts.project }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
<div>
  <canvas id="distribution"></canvas>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
<script>
(() => {
  const ctx = document.getElementById('distribution');

  new Chart(ctx, {
    type: 'pie',
    data: {
      labels: [{% for ts in times %}"{{ ts.project }}",{% endfor %}],
      datasets: [{
        label: 'Hours of Work',
        data: [{% for ts in times %}"{{ ts.duration }}",{% endfor %}],
      }]
    }
  });
})();
</script>
{% include 'footer.twig' %}